"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[388],{62869:function(e,t,r){r.d(t,{z:function(){return o}});var s=r(57437),a=r(2265),n=r(90535),i=r(94508);let l=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-semibold ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 touch-target",{variants:{variant:{default:"bg-gradient-primary text-white shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border-2 border-primary/30 bg-transparent text-foreground hover:bg-primary/10 hover:border-primary",secondary:"bg-secondary/10 text-secondary-foreground hover:bg-secondary/20",ghost:"hover:bg-accent/10 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",glass:"glass-card text-foreground hover:bg-white/20 dark:hover:bg-black/30",success:"bg-emerald-500 text-white shadow-sm hover:bg-emerald-600 shadow-emerald-500/25"},size:{default:"h-11 px-6 py-2",sm:"h-9 px-4 text-xs",lg:"h-12 px-8 text-base",xl:"h-14 px-10 text-lg",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,isLoading:o,children:u,disabled:c,...d}=e;return(0,s.jsx)("button",{className:(0,i.cn)(l({variant:a,size:n,className:r})),ref:t,disabled:c||o,...d,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:"Loading..."})]}):u})});o.displayName="Button"},18233:function(e,t,r){r.d(t,{aC:function(){return I},$0:function(){return d},v5:function(){return i},J7:function(){return u}});var s=r(3011),a=r(89134);let n={attemptId:null,quizSetId:null,quizTitle:"",totalQuestions:0,duration:30,questions:[],currentIndex:0,answers:{},startTime:0,elapsedTime:0,isPaused:!1,pausedAt:null,totalPausedTime:0,isStarted:!1,isCompleted:!1,isSubmitting:!1},i=(0,s.U)()((0,a.tJ)((e,t)=>({...n,initQuiz:t=>{e({attemptId:t.attemptId,quizSetId:t.quizSetId,quizTitle:t.quizTitle,questions:t.questions,totalQuestions:t.questions.length,duration:t.duration,currentIndex:0,answers:{},startTime:Date.now(),elapsedTime:0,isPaused:!1,pausedAt:null,totalPausedTime:0,isStarted:!0,isCompleted:!1,isSubmitting:!1})},selectAnswer:(r,s)=>{let a=t(),n=a.answers[r];a.questions[a.currentIndex];let i=(null==n?void 0:n.timeSpent)||0,l=(null==n?void 0:n.answeredAt)?Math.floor((Date.now()-n.answeredAt)/1e3):0;e({answers:{...a.answers,[r]:{questionId:r,selectedOption:s,timeSpent:i+l,flaggedForReview:(null==n?void 0:n.flaggedForReview)||!1,answeredAt:Date.now()}}})},clearAnswer:r=>{let s=t(),a=s.answers[r];a&&e({answers:{...s.answers,[r]:{...a,selectedOption:null}}})},toggleFlag:r=>{let s=t(),a=s.answers[r];e({answers:{...s.answers,[r]:{questionId:r,selectedOption:(null==a?void 0:a.selectedOption)||null,timeSpent:(null==a?void 0:a.timeSpent)||0,flaggedForReview:!(null==a?void 0:a.flaggedForReview),answeredAt:(null==a?void 0:a.answeredAt)||Date.now()}}})},nextQuestion:()=>{let r=t();r.currentIndex<r.questions.length-1&&e({currentIndex:r.currentIndex+1})},previousQuestion:()=>{let r=t();r.currentIndex>0&&e({currentIndex:r.currentIndex-1})},goToQuestion:r=>{let s=t();r>=0&&r<s.questions.length&&e({currentIndex:r})},updateElapsedTime:t=>{e({elapsedTime:t})},pause:()=>{t().isPaused||e({isPaused:!0,pausedAt:Date.now()})},resume:()=>{let r=t();if(r.isPaused&&r.pausedAt){let t=Math.floor((Date.now()-r.pausedAt)/1e3);e({isPaused:!1,pausedAt:null,totalPausedTime:r.totalPausedTime+t})}},setSubmitting:t=>{e({isSubmitting:t})},complete:()=>{e({isCompleted:!0,isSubmitting:!1})},reset:()=>{e(n)}}),{name:"ielts-quiz-storage",storage:(0,a.FL)(()=>localStorage),partialize:e=>({attemptId:e.attemptId,quizSetId:e.quizSetId,quizTitle:e.quizTitle,questions:e.questions,totalQuestions:e.totalQuestions,duration:e.duration,currentIndex:e.currentIndex,answers:e.answers,startTime:e.startTime,elapsedTime:e.elapsedTime,totalPausedTime:e.totalPausedTime,isStarted:e.isStarted,isCompleted:e.isCompleted})})),l=()=>i(e=>Math.max(0,60*e.duration-e.elapsedTime));var o=r(2265);function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onTimeUp:t,warningThreshold:r=60,onWarning:s}=e,{isStarted:a,isPaused:n,isCompleted:u,elapsedTime:c,duration:d,updateElapsedTime:m}=i(),f=l(),p=(0,o.useRef)(null),g=(0,o.useRef)(!1),w=(0,o.useCallback)(e=>"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0")),[]);return(0,o.useEffect)(()=>(!a||n||u?p.current&&(clearInterval(p.current),p.current=null):p.current=setInterval(()=>{i.setState(e=>({elapsedTime:e.elapsedTime+1}))},1e3),()=>{p.current&&clearInterval(p.current)}),[a,n,u]),(0,o.useEffect)(()=>{f<=0&&a&&!u&&(null==t||t())},[f,a,u,t]),(0,o.useEffect)(()=>{f<=r&&f>0&&!g.current&&a&&!u&&(g.current=!0,null==s||s())},[f,r,a,u,s]),(0,o.useEffect)(()=>{a||(g.current=!1)},[a]),{remainingTime:f,elapsedTime:c,formattedRemaining:w(f),formattedElapsed:w(c),isWarning:f<=r&&f>0,isDanger:f<=30&&f>0,isTimeUp:f<=0,progress:d>0?(60*d-f)/(60*d)*100:0}}var c=r(79235);function d(){let e=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.Z)({particleCount:100,spread:70,origin:{x:.5,y:.6},colors:["#6366f1","#ec4899","#10b981","#f59e0b","#3b82f6"],...e})},[]),t=(0,o.useCallback)(()=>{let e=Date.now()+3e3,t=["#6366f1","#ec4899","#10b981"],r=()=>{(0,c.Z)({particleCount:3,angle:60,spread:55,origin:{x:0},colors:t}),(0,c.Z)({particleCount:3,angle:120,spread:55,origin:{x:1},colors:t}),Date.now()<e&&requestAnimationFrame(r)};r()},[]);return{fireConfetti:e,fireCelebration:t,fireFireworks:(0,o.useCallback)(()=>{let e=Date.now()+5e3,t={startVelocity:30,spread:360,ticks:60,zIndex:9999},r=(e,t)=>Math.random()*(t-e)+e,s=setInterval(()=>{let a=e-Date.now();if(a<=0){clearInterval(s);return}let n=a/5e3*50;(0,c.Z)({...t,particleCount:n,origin:{x:r(.1,.3),y:Math.random()-.2},colors:["#6366f1","#818cf8"]}),(0,c.Z)({...t,particleCount:n,origin:{x:r(.7,.9),y:Math.random()-.2},colors:["#ec4899","#f472b6"]})},250)},[]),fireStars:(0,o.useCallback)(()=>{let e={spread:360,ticks:50,gravity:0,decay:.94,startVelocity:30,colors:["#ffd700","#ffec8b","#fff8dc"]},t=()=>{(0,c.Z)({...e,particleCount:40,scalar:1.2,shapes:["star"]}),(0,c.Z)({...e,particleCount:10,scalar:.75,shapes:["circle"]})};setTimeout(t,0),setTimeout(t,100),setTimeout(t,200)},[]),fireEmoji:(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\uD83C\uDF89",t=c.Z.shapeFromText({text:e,scalar:2});(0,c.Z)({shapes:[t],scalar:2,particleCount:30,spread:60,origin:{y:.3}})},[])}}var m=r(49360),f=r(34266),p=r.n(f);let g=new Map;0===g.size&&(g.set("demo@ielts.com",{id:(0,m.Z)(),name:"Demo Student",email:"demo@ielts.com",image:"https://ui-avatars.com/api/?name=Demo+Student&background=6366f1&color=fff",role:"USER",password:p().hashSync("demo123",10),xpPoints:1250,level:5,streak:7,targetBand:7.5,createdAt:new Date}),g.set("admin@ielts.com",{id:(0,m.Z)(),name:"Admin User",email:"admin@ielts.com",image:"https://ui-avatars.com/api/?name=Admin+User&background=ec4899&color=fff",role:"ADMIN",password:p().hashSync("admin123",10),xpPoints:5e3,level:15,streak:30,targetBand:9,createdAt:new Date}));let w="ielts_mcq_session";async function v(e,t){await new Promise(e=>setTimeout(e,500));let r=g.get(e.toLowerCase());if(!r||!await p().compare(t,r.password))return{success:!1,error:"Invalid email or password"};let{password:s,...a}=r,n={user:a,expires:new Date(Date.now()+6048e5).toISOString()};return localStorage.setItem(w,JSON.stringify(n)),{success:!0,user:a}}async function h(e,t,r){if(await new Promise(e=>setTimeout(e,500)),g.has(t.toLowerCase()))return{success:!1,error:"Email already registered"};let s=await p().hash(r,10),a={id:(0,m.Z)(),name:e,email:t.toLowerCase(),image:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e),"&background=6366f1&color=fff"),role:"USER",password:s,xpPoints:0,level:1,streak:0,targetBand:7,createdAt:new Date};g.set(t.toLowerCase(),a);let{password:n,...i}=a,l={user:i,expires:new Date(Date.now()+6048e5).toISOString()};return localStorage.setItem(w,JSON.stringify(l)),{success:!0,user:i}}async function x(){localStorage.removeItem(w)}function b(){let e=localStorage.getItem(w);if(!e)return null;try{let t=JSON.parse(e);if(new Date(t.expires)<new Date)return localStorage.removeItem(w),null;return t}catch(e){return null}}async function S(e){let t=b();if(!t)return{success:!1};let r=g.get(t.user.email);if(!r)return{success:!1};Object.assign(r,e);let{password:s,...a}=r;return t.user=a,localStorage.setItem(w,JSON.stringify(t)),{success:!0,user:a}}async function y(e){let t=b();if(!t)return{newXP:0,newLevel:1};let r=g.get(t.user.email);if(!r)return{newXP:0,newLevel:1};r.xpPoints+=e,r.level=Math.floor(Math.sqrt(r.xpPoints/100))+1;let{password:s,...a}=r;return t.user=a,localStorage.setItem(w,JSON.stringify(t)),{newXP:r.xpPoints,newLevel:r.level}}function I(){let[e,t]=(0,o.useState)(null),[r,s]=(0,o.useState)(null),[a,n]=(0,o.useState)(!0),i=(0,o.useCallback)(()=>{let e=b();s(e),t((null==e?void 0:e.user)||null),n(!1)},[]);(0,o.useEffect)(()=>{i();let e=e=>{"ielts_mcq_session"===e.key&&i()};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[i]);let l=(0,o.useCallback)(async(e,r)=>{n(!0);let a=await v(e,r);return a.success&&a.user&&(t(a.user),s(b())),n(!1),{success:a.success,error:a.error}},[]),u=(0,o.useCallback)(async(e,r,a)=>{n(!0);let i=await h(e,r,a);return i.success&&i.user&&(t(i.user),s(b())),n(!1),{success:i.success,error:i.error}},[]),c=(0,o.useCallback)(async()=>{await x(),t(null),s(null)},[]),d=(0,o.useCallback)(async e=>{let r=await S(e);return r.success&&r.user&&(t(r.user),s(b())),r.success},[]),m=(0,o.useCallback)(async e=>{let t=await y(e);return i(),t},[i]);return{user:e,session:r,isLoading:a,isAuthenticated:!!e,isAdmin:(null==e?void 0:e.role)==="ADMIN"||(null==e?void 0:e.role)==="SUPER_ADMIN",signIn:l,signUp:u,signOut:c,updateProfile:d,addXP:m,refreshSession:i}}},94508:function(e,t,r){r.d(t,{Us:function(){return i},cn:function(){return n}});var s=r(61994),a=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}function i(e){return e>=8?"text-emerald-500":e>=7?"text-green-500":e>=6?"text-yellow-500":e>=5?"text-orange-500":"text-red-500"}}}]);