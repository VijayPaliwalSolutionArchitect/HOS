(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{87132:function(e,s,t){Promise.resolve().then(t.bind(t,63171))},63171:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return F}});var i=t(57437),a=t(2265),r=t(99376),n=t(48614),l=t(40521),d=t(27072),c=t(18233),o=t(94508),m=t(81706),x=t(46211),u=t(62869),h=t(35974),f=t(30401),g=t(32489);let p=["A","B","C","D","E","F"];var j=function(e){let{option:s,index:t,isSelected:a,onSelect:r,showResult:n=!1,disabled:d=!1}=e,c=n&&s.isCorrect,m=n&&a&&!s.isCorrect;return(0,i.jsxs)(l.E.button,{className:(0,o.cn)("option-button w-full flex items-center gap-4 p-4 rounded-xl text-left","bg-card border-2 transition-all duration-200",!n&&!d&&"hover:border-primary/50 hover:bg-primary/5",a&&!n&&"selected border-primary bg-primary/10",c&&"correct border-emerald-500 bg-emerald-500/10",m&&"incorrect border-red-500 bg-red-500/10",d&&"cursor-default"),onClick:r,disabled:d,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},whileTap:d?void 0:{scale:.98},role:"radio","aria-checked":a,children:[(0,i.jsx)("span",{className:(0,o.cn)("flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center","text-sm font-bold transition-colors duration-200",!a&&!n&&"bg-muted text-muted-foreground",a&&!n&&"bg-primary text-primary-foreground",c&&"bg-emerald-500 text-white",m&&"bg-red-500 text-white"),children:n?c?(0,i.jsx)(f.Z,{className:"w-5 h-5"}):m?(0,i.jsx)(g.Z,{className:"w-5 h-5"}):p[t]:p[t]}),(0,i.jsx)("span",{className:(0,o.cn)("flex-1 text-base",c&&"text-emerald-700 dark:text-emerald-300 font-medium",m&&"text-red-700 dark:text-red-300"),children:s.text}),a&&!n&&(0,i.jsx)(l.E.div,{className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:(0,i.jsx)(f.Z,{className:"w-4 h-4 text-white"})})]})};function v(e){let{questionNumber:s,totalQuestions:t,text:a,type:r,options:d,selectedOption:c,onSelectOption:f,isFlagged:g,onToggleFlag:p,showResult:v=!1,imageUrl:b,audioUrl:N,explanation:w,difficulty:y}=e,k=d.find(e=>e.isCorrect),C=v&&c===(null==k?void 0:k.id);return(0,i.jsxs)(l.E.div,{className:"glass-card rounded-2xl p-6 md:p-8 max-w-3xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Question ",s," of ",t]}),y&&(0,i.jsx)(h.C,{variant:"EASY"===y?"success":"HARD"===y?"warning":"EXPERT"===y?"destructive":"default",children:y.toLowerCase()})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[N&&(0,i.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>{new Audio(N).play()},"aria-label":"Play audio",children:(0,i.jsx)(m.Z,{className:"h-5 w-5"})}),(0,i.jsx)(u.z,{variant:"ghost",size:"icon",onClick:p,className:(0,o.cn)(g&&"text-amber-500"),"aria-label":g?"Remove flag":"Flag for review",children:(0,i.jsx)(x.Z,{className:(0,o.cn)("h-5 w-5",g&&"fill-current")})})]})]}),b&&(0,i.jsx)("div",{className:"mb-6 rounded-xl overflow-hidden",children:(0,i.jsx)("img",{src:b,alt:"Question image",className:"w-full h-auto max-h-64 object-contain bg-muted"})}),(0,i.jsx)(l.E.h2,{className:"text-xl md:text-2xl font-semibold text-foreground mb-8 leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},"aria-live":"polite",children:a}),(0,i.jsx)("div",{className:"space-y-3",role:"radiogroup","aria-label":"Answer options",children:(0,i.jsx)(n.M,{mode:"wait",children:d.map((e,s)=>(0,i.jsx)(j,{option:e,index:s,isSelected:c===e.id,onSelect:()=>f(e.id),showResult:v,disabled:v},e.id))})}),v&&(0,i.jsxs)(l.E.div,{className:(0,o.cn)("mt-6 p-4 rounded-xl",C?"bg-emerald-500/10 border border-emerald-500/20":"bg-red-500/10 border border-red-500/20"),initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{delay:.3},children:[(0,i.jsx)("p",{className:(0,o.cn)("font-semibold mb-2",C?"text-emerald-600":"text-red-600"),children:C?"✓ Correct!":"✗ Incorrect"}),!C&&k&&(0,i.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Correct answer: ",(0,i.jsx)("span",{className:"font-medium text-foreground",children:k.text})]}),w&&(0,i.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[(0,i.jsx)("span",{className:"font-medium",children:"Explanation:"})," ",w]})]})]})}var b=t(89227),N=t(91723),w=t(33276);let y={sm:{ringSize:60,strokeWidth:4,fontSize:"text-sm"},md:{ringSize:80,strokeWidth:5,fontSize:"text-lg"},lg:{ringSize:100,strokeWidth:6,fontSize:"text-xl"}};function k(e){let{remainingTime:s,totalTime:t,isPaused:a,onPause:r,onResume:d,showControls:c=!0,size:m="md",className:x}=e,{ringSize:h,strokeWidth:f,fontSize:g}=y[m],p=(h-f)/2,j=2*p*Math.PI,v=s<=60&&s>30,k=s<=30,[C,z]=k?["#ef4444","#f87171"]:v?["#f59e0b","#fbbf24"]:["#6366f1","#ec4899"];return(0,i.jsxs)("div",{className:(0,o.cn)("flex items-center gap-3",x),children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("svg",{width:h,height:h,viewBox:"0 0 ".concat(h," ").concat(h),className:"transform -rotate-90",children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"timerGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:C}),(0,i.jsx)("stop",{offset:"100%",stopColor:z})]})}),(0,i.jsx)("circle",{cx:h/2,cy:h/2,r:p,fill:"none",stroke:"currentColor",strokeWidth:f,className:"text-muted"}),(0,i.jsx)(l.E.circle,{cx:h/2,cy:h/2,r:p,fill:"none",stroke:"url(#timerGradient)",strokeWidth:f,strokeLinecap:"round",strokeDasharray:j,animate:{strokeDashoffset:j-s/t*100/100*j},transition:{duration:.5,ease:"linear"}})]}),(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)(n.M,{mode:"wait",children:a?(0,i.jsx)(l.E.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:(0,i.jsx)(b.Z,{className:"w-5 h-5 text-muted-foreground"})},"paused"):(0,i.jsx)(l.E.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:(0,o.cn)(k&&"animate-pulse text-red-500",v&&"text-amber-500",!k&&!v&&"text-primary"),children:(0,i.jsx)(N.Z,{className:"w-5 h-5"})},"clock")})})]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)(l.E.span,{className:(0,o.cn)(g,"font-bold font-mono",k&&"text-red-500",v&&"text-amber-500",!k&&!v&&"text-foreground"),animate:k?{scale:[1,1.1,1]}:void 0,transition:k?{repeat:1/0,duration:1}:void 0,children:"".concat(Math.floor(s/60).toString().padStart(2,"0"),":").concat((s%60).toString().padStart(2,"0"))}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:a?"Paused":"Remaining"})]}),c&&(0,i.jsx)(u.z,{variant:"ghost",size:"icon",onClick:a?d:r,className:"ml-2","aria-label":a?"Resume quiz":"Pause quiz",children:a?(0,i.jsx)(w.Z,{className:"w-5 h-5"}):(0,i.jsx)(b.Z,{className:"w-5 h-5"})})]})}var C=t(32759);function z(e){let{current:s,total:t,answered:a,questions:r,onQuestionClick:n,showDots:d=!0,className:c}=e;return(0,i.jsxs)("div",{className:(0,o.cn)("space-y-4",c),children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)(C.E,{value:a/t*100,className:"flex-1 h-2"}),(0,i.jsxs)("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[a,"/",t," answered"]})]}),d&&(0,i.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:r.map((e,s)=>(0,i.jsx)(l.E.button,{className:(0,o.cn)("w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium","transition-all duration-200 touch-target",e.isCurrent&&"ring-2 ring-primary ring-offset-2 ring-offset-background",e.isAnswered&&!e.isCurrent&&"bg-primary/20 text-primary",e.isFlagged&&"bg-amber-500/20 text-amber-600",!e.isAnswered&&!e.isCurrent&&"bg-muted text-muted-foreground","hover:scale-110"),onClick:()=>null==n?void 0:n(s),whileHover:{scale:1.1},whileTap:{scale:.95},"aria-label":"Go to question ".concat(s+1).concat(e.isAnswered?", answered":"").concat(e.isFlagged?", flagged":""),"aria-current":e.isCurrent?"step":void 0,children:e.isAnswered?(0,i.jsx)(f.Z,{className:"w-4 h-4"}):e.isFlagged?(0,i.jsx)(x.Z,{className:"w-3 h-3"}):s+1},e.id))}),d&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-4 text-xs text-muted-foreground",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded-full bg-primary/20"}),(0,i.jsx)("span",{children:"Answered"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded-full bg-amber-500/20"}),(0,i.jsx)("span",{children:"Flagged"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded-full bg-muted"}),(0,i.jsx)("span",{children:"Unanswered"})]})]})]})}var E=t(85171),S=t(33694),Z=t(49360),O=t(69064),P=t(44743),q=t(92451),A=t(10407),R=t(14938);function F(){let e=(0,r.useParams)(),s=(0,r.useRouter)(),{user:t,isAuthenticated:o,isLoading:m,addXP:x}=(0,c.aC)(),{fireCelebration:h}=(0,c.$0)(),{isStarted:f,isPaused:p,isCompleted:j,questions:b,currentIndex:N,answers:w,duration:y,initQuiz:C,selectAnswer:F,toggleFlag:M,nextQuestion:Q,previousQuestion:T,goToQuestion:D,pause:I,resume:W,complete:L,reset:_}=(0,c.v5)(),[G,Y]=(0,a.useState)(!1),[B,H]=(0,a.useState)(!0),[U,X]=(0,a.useState)(!1),[J,$]=(0,a.useState)(null),K=(0,c.J7)({onTimeUp:()=>{O.ZP.error("Time's up!"),et()},onWarning:()=>(0,O.ZP)("1 minute remaining!",{icon:"⏰"})});(0,a.useEffect)(()=>{let t=e.slug,i=S.wR.find(e=>e.slug===t);i?$(i):s.push("/quiz/sets")},[e.slug,s]),(0,a.useEffect)(()=>{m||o||s.push("/login")},[m,o,s]);let V=b[N],ee=V?w[V.id]:void 0,es=(0,d.QS)({onSwipedLeft:()=>!U&&Q(),onSwipedRight:()=>!U&&T(),preventScrollOnSwipe:!0,trackMouse:!1});(0,a.useEffect)(()=>{let e=e=>{!U&&f&&(("ArrowRight"===e.key||"Enter"===e.key)&&Q(),"ArrowLeft"===e.key&&T()," "===e.key&&(e.preventDefault(),p?W():I()),"f"===e.key&&V&&M(V.id))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,p,U,V]);let et=(0,a.useCallback)(async()=>{L(),X(!0),h();let e=10*Object.values(w).filter(e=>{var s;let t=b.find(s=>s.id===e.questionId);return null==t?void 0:null===(s=t.options.find(s=>s.id===e.selectedOption))||void 0===s?void 0:s.isCorrect}).length+50;await x(e),O.ZP.success("+".concat(e," XP earned!"))},[w,b,L,x,h]),ei=b.map((e,s)=>{var t,i;return{id:e.id,isAnswered:!!(null===(t=w[e.id])||void 0===t?void 0:t.selectedOption),isFlagged:(null===(i=w[e.id])||void 0===i?void 0:i.flaggedForReview)||!1,isCurrent:s===N}}),ea=Object.values(w).filter(e=>e.selectedOption).length;return m||!J?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):(0,i.jsxs)("div",{className:"min-h-screen bg-background",...es,children:[(0,i.jsx)(E.O_,{trigger:U,type:"celebration"}),(0,i.jsx)(n.M,{children:B&&(0,i.jsx)(l.E.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,i.jsxs)(E.Wn,{className:"max-w-md w-full text-center",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold mb-2",children:J.title}),(0,i.jsx)("p",{className:"text-muted-foreground mb-6",children:J.description}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6 text-sm",children:[(0,i.jsxs)("div",{className:"p-3 rounded-lg bg-muted",children:[(0,i.jsx)("div",{className:"font-bold",children:J.totalQuestions}),(0,i.jsx)("div",{className:"text-muted-foreground",children:"Questions"})]}),(0,i.jsxs)("div",{className:"p-3 rounded-lg bg-muted",children:[(0,i.jsxs)("div",{className:"font-bold",children:[J.duration,"m"]}),(0,i.jsx)("div",{className:"text-muted-foreground",children:"Duration"})]}),(0,i.jsxs)("div",{className:"p-3 rounded-lg bg-muted",children:[(0,i.jsxs)("div",{className:"font-bold",children:[J.passScore,"%"]}),(0,i.jsx)("div",{className:"text-muted-foreground",children:"Pass Score"})]})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)(u.z,{variant:"outline",className:"flex-1",onClick:()=>s.push("/quiz/sets"),children:"Cancel"}),(0,i.jsx)(u.z,{className:"flex-1",onClick:()=>{J&&(_(),C({attemptId:(0,Z.Z)(),quizSetId:J.id,quizTitle:J.title,questions:S.nq.slice(0,J.totalQuestions).map((e,s)=>({...e,order:s+1,type:e.type})),duration:J.duration}),H(!1))},children:"Start Quiz"})]})]})})}),f&&!B&&(0,i.jsx)("header",{className:"sticky top-0 z-40 glass-card border-b",children:(0,i.jsxs)("div",{className:"container mx-auto px-4 py-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,i.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>Y(!0),children:(0,i.jsx)(g.Z,{className:"w-5 h-5"})}),(0,i.jsx)(k,{remainingTime:K.remainingTime,totalTime:60*y,isPaused:p,onPause:I,onResume:W}),(0,i.jsxs)(u.z,{onClick:et,className:"gap-2",children:[(0,i.jsx)(P.Z,{className:"w-4 h-4"}),"Submit"]})]}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(z,{current:N+1,total:b.length,answered:ea,questions:ei,onQuestionClick:D,showDots:b.length<=20})})]})}),f&&!B&&!U&&V&&(0,i.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,i.jsx)(n.M,{mode:"wait",children:(0,i.jsx)(v,{questionNumber:N+1,totalQuestions:b.length,text:V.text,type:V.type,options:V.options,selectedOption:(null==ee?void 0:ee.selectedOption)||null,onSelectOption:e=>F(V.id,e),isFlagged:(null==ee?void 0:ee.flaggedForReview)||!1,onToggleFlag:()=>M(V.id),difficulty:V.difficulty},V.id)}),(0,i.jsxs)("div",{className:"flex justify-between mt-8 max-w-3xl mx-auto",children:[(0,i.jsxs)(u.z,{variant:"outline",onClick:T,disabled:0===N,className:"gap-2",children:[(0,i.jsx)(q.Z,{className:"w-4 h-4"}),"Previous"]}),N<b.length-1?(0,i.jsxs)(u.z,{onClick:Q,className:"gap-2",children:["Next",(0,i.jsx)(A.Z,{className:"w-4 h-4"})]}):(0,i.jsxs)(u.z,{onClick:et,className:"gap-2",children:[(0,i.jsx)(P.Z,{className:"w-4 h-4"}),"Submit"]})]})]}),U&&(0,i.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,i.jsxs)(E.Wn,{className:"max-w-2xl mx-auto text-center",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Quiz Complete! \uD83C\uDF89"}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,i.jsxs)("div",{className:"p-4 rounded-xl bg-emerald-500/10",children:[(0,i.jsx)("div",{className:"text-3xl font-bold text-emerald-600",children:Object.values(w).filter(e=>{var s;let t=b.find(s=>s.id===e.questionId);return null==t?void 0:null===(s=t.options.find(s=>s.id===e.selectedOption))||void 0===s?void 0:s.isCorrect}).length}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Correct"})]}),(0,i.jsxs)("div",{className:"p-4 rounded-xl bg-red-500/10",children:[(0,i.jsx)("div",{className:"text-3xl font-bold text-red-600",children:b.length-Object.values(w).filter(e=>{var s;let t=b.find(s=>s.id===e.questionId);return null==t?void 0:null===(s=t.options.find(s=>s.id===e.selectedOption))||void 0===s?void 0:s.isCorrect}).length}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Incorrect"})]}),(0,i.jsxs)("div",{className:"p-4 rounded-xl bg-primary/10",children:[(0,i.jsxs)("div",{className:"text-3xl font-bold text-primary",children:[Math.round(Object.values(w).filter(e=>{var s;let t=b.find(s=>s.id===e.questionId);return null==t?void 0:null===(s=t.options.find(s=>s.id===e.selectedOption))||void 0===s?void 0:s.isCorrect}).length/b.length*100),"%"]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Score"})]})]}),(0,i.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,i.jsxs)(u.z,{variant:"outline",onClick:()=>s.push("/dashboard"),className:"gap-2",children:[(0,i.jsx)(R.Z,{className:"w-4 h-4"}),"Dashboard"]}),(0,i.jsx)(u.z,{onClick:()=>{_(),X(!1),H(!0)},children:"Try Again"})]})]})}),(0,i.jsx)(n.M,{children:G&&(0,i.jsx)(l.E.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,i.jsxs)(E.Wn,{className:"max-w-sm w-full text-center",children:[(0,i.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Exit Quiz?"}),(0,i.jsx)("p",{className:"text-muted-foreground mb-6",children:"Your progress will be saved. You can resume later."}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)(u.z,{variant:"outline",className:"flex-1",onClick:()=>Y(!1),children:"Continue"}),(0,i.jsx)(u.z,{variant:"destructive",className:"flex-1",onClick:()=>{_(),s.push("/dashboard")},children:"Exit"})]})]})})})]})}},32759:function(e,s,t){"use strict";t.d(s,{E:function(){return n}});var i=t(57437),a=t(2265),r=t(94508);let n=a.forwardRef((e,s)=>{let{className:t,value:a=0,max:n=100,showLabel:l,variant:d="default",...c}=e,o=Math.min(Math.max(a/n*100,0),100);return(0,i.jsxs)("div",{ref:s,className:(0,r.cn)("relative w-full",t),...c,children:[(0,i.jsx)("div",{className:"progress-bar",children:(0,i.jsx)("div",{className:(0,r.cn)("progress-bar-fill",{default:"bg-gradient-primary",success:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-red-500"}[d]),style:{width:"".concat(o,"%")}})}),l&&(0,i.jsxs)("span",{className:"absolute right-0 top-1/2 -translate-y-1/2 text-xs font-medium text-muted-foreground",children:[Math.round(o),"%"]})]})});n.displayName="Progress"}},function(e){e.O(0,[218,521,838,64,543,388,80,971,117,744],function(){return e(e.s=87132)}),_N_E=e.O()}]);