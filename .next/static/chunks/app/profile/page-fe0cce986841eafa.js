(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{81647:function(e,s,a){Promise.resolve().then(a.bind(a,80539))},80539:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return C}});var t=a(57437),r=a(2265),l=a(99376),n=a(18233),i=a(56594),d=a(85171),c=a(62869),o=a(95186),m=a(26815),x=a(16831),u=a(35974),h=a(32759),f=a(33694),j=a(69064),g=a(79205);let p=(0,g.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var v=a(32489);let N=(0,g.Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var b=a(86595),y=a(76399),w=a(49474);let k=(0,g.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function C(){let e=(0,l.useRouter)(),{user:s,isAuthenticated:a,isLoading:g,updateProfile:C}=(0,n.aC)(),[M,P]=(0,r.useState)(!1),[z,Z]=(0,r.useState)(""),[S,B]=(0,r.useState)(7);(0,r.useEffect)(()=>{g||a||e.push("/login"),s&&(Z(s.name||""),B(s.targetBand||7))},[g,a,e,s]);let L=async()=>{await C({name:z,targetBand:S})?(j.ZP.success("Profile updated!"),P(!1)):j.ZP.error("Failed to update profile")};if(g||!s)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});let _=Math.floor(100*Math.pow(1.5,s.level)),E=Math.floor(100*Math.pow(1.5,s.level-1)),W=(s.xpPoints-E)/(_-E)*100;return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(i.Navbar,{}),(0,t.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)(d.Wn,{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[(0,t.jsx)(x.q,{src:s.image,fallback:s.name||"U",size:"xl"}),(0,t.jsx)("div",{className:"flex-1 text-center md:text-left",children:M?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(o.I,{value:z,onChange:e=>Z(e.target.value),placeholder:"Your name"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m._,{children:"Target Band:"}),(0,t.jsx)(o.I,{type:"number",min:1,max:9,step:.5,value:S,onChange:e=>B(parseFloat(e.target.value)),className:"w-20"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.z,{size:"sm",onClick:L,className:"gap-1",children:[(0,t.jsx)(p,{className:"w-4 h-4"}),"Save"]}),(0,t.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>P(!1),className:"gap-1",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4"}),"Cancel"]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:s.name}),(0,t.jsx)(c.z,{size:"icon",variant:"ghost",onClick:()=>P(!0),children:(0,t.jsx)(N,{className:"w-4 h-4"})})]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:s.email}),(0,t.jsxs)("div",{className:"flex items-center justify-center md:justify-start gap-4 mt-2",children:[(0,t.jsxs)(u.C,{children:["Level ",s.level]}),(0,t.jsxs)(u.C,{variant:"secondary",children:["Target: Band ",s.targetBand]})]})]})}),(0,t.jsx)(d.iT,{score:s.targetBand||7,isBandScore:!0,size:"lg",label:"Target"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,t.jsxs)(d.Wn,{className:"text-center",children:[(0,t.jsx)(b.Z,{className:"w-8 h-8 mx-auto mb-2 text-amber-500"}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.xpPoints.toLocaleString()}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"XP Points"})]}),(0,t.jsxs)(d.Wn,{className:"text-center",children:[(0,t.jsx)(y.Z,{className:"w-8 h-8 mx-auto mb-2 text-orange-500"}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.streak}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Day Streak"})]}),(0,t.jsxs)(d.Wn,{className:"text-center",children:[(0,t.jsx)(w.Z,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:f.jx.length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Badges"})]}),(0,t.jsxs)(d.Wn,{className:"text-center",children:[(0,t.jsx)(k,{className:"w-8 h-8 mx-auto mb-2 text-emerald-500"}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:"42"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Quizzes"})]})]}),(0,t.jsxs)(d.Wn,{className:"mb-8",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Level Progress"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(u.C,{variant:"secondary",children:["Lv.",s.level]}),(0,t.jsx)(h.E,{value:W,className:"flex-1 h-3"}),(0,t.jsxs)(u.C,{children:["Lv.",s.level+1]})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:[_-s.xpPoints," XP needed for next level"]})]}),(0,t.jsxs)(d.Wn,{children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Badges Earned"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:f.jx.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-muted/50",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-primary flex items-center justify-center text-2xl",children:e.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsx)(u.C,{variant:e.rarity.toLowerCase(),className:"text-xs",children:e.rarity})]})]},e.id))})]})]})})]})}},95186:function(e,s,a){"use strict";a.d(s,{I:function(){return n}});var t=a(57437),r=a(2265),l=a(94508);let n=r.forwardRef((e,s)=>{let{className:a,type:r,error:n,...i}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-11 w-full rounded-xl border border-input bg-background px-4 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",n&&"border-destructive focus-visible:ring-destructive",a),ref:s,...i})});n.displayName="Input"},26815:function(e,s,a){"use strict";a.d(s,{_:function(){return n}});var t=a(57437),r=a(2265),l=a(94508);let n=r.forwardRef((e,s)=>{let{className:a,children:r,required:n,...i}=e;return(0,t.jsxs)("label",{ref:s,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...i,children:[r,n&&(0,t.jsx)("span",{className:"text-destructive ml-1",children:"*"})]})});n.displayName="Label"},32759:function(e,s,a){"use strict";a.d(s,{E:function(){return n}});var t=a(57437),r=a(2265),l=a(94508);let n=r.forwardRef((e,s)=>{let{className:a,value:r=0,max:n=100,showLabel:i,variant:d="default",...c}=e,o=Math.min(Math.max(r/n*100,0),100);return(0,t.jsxs)("div",{ref:s,className:(0,l.cn)("relative w-full",a),...c,children:[(0,t.jsx)("div",{className:"progress-bar",children:(0,t.jsx)("div",{className:(0,l.cn)("progress-bar-fill",{default:"bg-gradient-primary",success:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-red-500"}[d]),style:{width:"".concat(o,"%")}})}),i&&(0,t.jsxs)("span",{className:"absolute right-0 top-1/2 -translate-y-1/2 text-xs font-medium text-muted-foreground",children:[Math.round(o),"%"]})]})});n.displayName="Progress"},86595:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(79205).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])}},function(e){e.O(0,[218,521,838,648,64,388,80,594,971,117,744],function(){return e(e.s=81647)}),_N_E=e.O()}]);